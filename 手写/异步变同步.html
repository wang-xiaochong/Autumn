<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>异步变同步</title>
</head>

<body>

</body>
<script>

    // 更改代码实现最终效果：每隔一秒输出一个数字
    // for (let i = 0; i < 5; i++) {
    //     setTimeout(() => {
    //         console.log(i)
    //     }, 1000);
    // }

    // 1.实现思路：
    // promise.then需要根据promise的状态做出回调。延迟1秒更改promise的状态，自身调用
    // function delay() {
    //     var p1 = new Promise(resolve => {
    //         resolve()
    //     })
    //     for (let i = 0; i < 5; i++) {
    //         p1 = p1.then(res => {
    //             return new Promise(resolve => {
    //                 setTimeout(() => {
    //                     console.log(i)
    //                     resolve()
    //                 }, 1000);
    //             })

    //         })
    //     }

    // }
    // delay()


    //2.实现思路：
    // array.reduce函数,下一次执行需要上一次的执行状态

    // function delay() {
    //     let nums = []
    //     // nums.reduce
    //     for (let i = 0; i < 5; i++) {
    //         nums.push(i)
    //     }
    //     nums.reduce((promise, value, index, arr) => {
    //         promise = promise.then(_ => {
    //             return new Promise(resolve => {
    //                 setTimeout(() => {
    //                     console.log(value)
    //                     resolve()
    //                 }, 1000);
    //             })
    //         })
    //         return promise
    //     }, Promise.resolve())
    // }
    // delay()

    // 3.实现思路
    // async await promise 搭配使用

    function _console(data) {
        return new Promise(resolve => {
            setTimeout(() => {
                console.log(data)
                resolve()
            }, 1000);
        })
    }
    async function delay() {
        for (let i = 0; i < 5; i++) {
            await _console(i)
        }
    }
    delay()







</script>

</html>